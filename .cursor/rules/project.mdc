---
description: Top-level rules and information for the project
alwaysApply: true
---
# Deno MCP Template Development Guide

Deno version: ^2.4.0

## Build/Development Commands

Start: `deno task start`
Dev mode: `deno task dev`
Format, lint, and check code: `deno task prep`

## Project Structure

```markdown
deno.json     # Project configuration
main.ts       # The main entry point
src/              
├── app/                        
│   ├── app.ts                  # The main application class
│   ├── config.ts               # Configuration for the Express and MCP server
│   ├── express.ts              # The Express server
│   ├── inMemoryEventStore.ts   # Simple in-memory event store for for session resumability
│   ├── logger.ts               # A simple logger that doesn't interfere with stdout
│   └── middleware.ts           # Middleware for the server (tool-call validation, etc.)
├── mcp/ 
│   ├── prompts/                             
│   │   ├── codeReview.ts                   # A simple code-review prompt example
│   │   ├── mod.ts                          # Provides a single point of export for all the MCP prompts
│   │   └── schemas.ts                      # Zod schemas for MCP prompts
│   ├── resources/                             
│   │   ├── greetings.ts                    # A simple resource template (dynamic resource) example
│   │   ├── helloWorld.ts                   # A simple resource (direct resource) example
│   │   ├── mod.ts                          # Provides a single point of export for all the MCP resources
│   │   └── schemas.ts                      # Zod schemas for MCP resources
│   ├── tools/                             
│   │   ├── knowledgeGraph/                 # The knowledge graph example tool
│   │   │   ├── knowledgeGraphManager.ts    # The knowledge graph class
│   │   │   ├── methods.ts                  # Adaptors for converting graph function to MCP tool calls/results
│   │   │   ├── mod.ts                      # Provides a single point of export for the knowledge graph
│   │   │   └── schemas.ts                  # Zod schemas for knowledge graph tools
│   │   └── mod.ts                          # Provides a single point of export for all the MCP tools
│   └── mod.ts                  # Provides a single point of export for the MCP server and all the MCP internals
├── constants.ts                # Shared constants for the server and application
├── types.ts                    # Shared types for the MCP server
└── utils.ts                    # Shared utility functions for the MCP server
static/             
├── .well-known/    
│   ├── llms.txt                # An example llms.txt giving LLMs information about the server    
│   └── openapi.yaml            # An example OpenAPI specification for the server 
vendor/
└── schema.ts                   # The 2025-06-18 MCP schema from Anthropic
```

## Code Style Guidelines

Deno: This project uses Deno exclusively. Follow Deno standards and best practice.
Imports: Use JSR imports (`jsr:`) or npm imports (`npm:`) with explicit paths. ES module style, include `.ts` extension. Group imports logically.
Structure: The entrypoint is `main.ts`. Core functionality is in `src/`. `src/app` wraps the MCP server from `src/mcp` in some convenience functions for Express, logging, etc.
TypeScript: Strict type checking, ES modules, explicit return types
Naming: PascalCase for classes/types, camelCase for functions/variables
Files: Lowercase with hyphens, test files with .test.ts suffix
Error Handling: Use TypeScript's strict mode, explicit error checking in tests
Formatting: 2-space indentation, semicolons required, single quotes preferred
Testing: Locate tests in `test/`, use descriptive test names. We use `deno test` for testing.
Comments: JSDoc for public APIs, inline comments for complex logic

## Best Practices

Environment Variables: env vars are loading in `main.ts` using `@std/dotenv/load` in the top-level
File Paths: Use `@std/path` for cross-platform file path handling
Data Validation: Use `zod` schemas for data validation
HTTP Responses: Return proper status codes and structured JSON responses, including JSONRPC when necessary.
Transactions: Use `kv.atomic()` for Deno KV transactions when updating multiple records
Error Handling: Provide detailed error messages but avoid exposing sensitive information
Tool Implementation: Follow the MCP schema for defining tool schemas and handlers

## Docs

[MCP llms.txt]: https://modelcontextprotocol.io/llms-full.txt

[MCP Typescript SDK]: https://github.com/modelcontextprotocol/typescript-sdk

[Deno]: https://docs.deno.com/