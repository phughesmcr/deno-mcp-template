---
description: Top-level rules and information for the project
alwaysApply: true
---
# Deno MCP Template Development Guide

Deno version: ^2.4.0

## Build/Development Commands

Start: `deno task start`
Dev mode: `deno task dev`
Format, lint, and type-check code: `deno task prep`

## Project Structure

The code is structured to be easily parsable by an AI agent. Files are grouped by feature, and ideally less than 200 lines of code.

```markdown
deno.json     # Project configuration
main.ts       # The main entry point
src/              
├── app/    
│   ├── http/
│   │   ├── handlers.ts             # HTTP handlers for the MCP server (GET, POST, etc.)
│   │   ├── kvEventStore.ts         # Simple Deno KV event store for for session resumability
│   │   ├── middleware.ts           # Middleware for the HTTP server (CORS, rate limiting, etc.)
│   │   ├── server.ts               # The Hono HTTP server manager
│   │   └── transport.ts            # The HTTP to MCP transport manager
│   ├── app.ts                  # The main application class
│   ├── cli.ts                  # Parses CLI args and env vars into an AppConfig object
│   ├── signals.ts              # Signal handling for SIGINT, SIGTERM, etc.
│   └── stdio.ts                # The STDIO transport & state manager
├── mcp/ 
│   ├── prompts/                             
│   │   ├── codeReview.ts                   # A simple code-review prompt example
│   │   └── mod.ts                          # Provides a single point of export for all the MCP prompts
│   ├── resources/                             
│   │   ├── greetings.ts                    # A simple resource template (dynamic resource) example
│   │   ├── helloWorld.ts                   # A simple resource (direct resource) example
│   │   ├── mod.ts                          # Provides a single point of export for all the MCP resources
│   │   └── schemas.ts                      # Zod schemas for MCP resources
│   ├── tools/                             
│   │   ├── mod.ts                          # Provides a single point of export for all the MCP tools
│   │   ├── poem.ts                         # A tool that showcases sampling
│   │   └── weather.ts                      # A tool that fetches weather data
│   └── mod.ts                  # Provides a single point of export for the MCP server and all the MCP internals
├── shared/
│   ├── constants/  
│   │   ├── app.ts                  # Constants for the App (e.g., name, description, etc.)
│   │   ├── http.ts                 # Constants for the HTTP server (e.g., headers, ports, etc.)
│   │   └── mcp.ts                  # Constants for the MCP server (e.g., capabilities, etc.)
│   ├── validation/
│   │   ├── config.ts               # Validation of the AppConfig object
│   │   ├── header.ts               # Validation for headers
│   │   ├── host.ts                 # Validation for hosts
│   │   ├── hostname.ts             # Validation for hostnames
│   │   ├── origin.ts               # Validation for origins
│   │   └── port.ts                 # Validation for ports
│   ├── constants.ts                # Single point of export for all shared constants
│   ├── types.ts                    # Shared types
│   ├── utils.ts                    # Shared utility functions
│   └── validation.ts               # Single point of export for all shared validation functions
static/             
├── .well-known/    
│   ├── llms.txt                # An example llms.txt giving LLMs information about the server    
│   └── openapi.yaml            # An example OpenAPI specification for the server 
└── dxt-manifest.json           # The manifest for the DXT package
```

## Code Style Guidelines

Deno: This project uses Deno exclusively. Follow Deno standards and best practice.
Imports: Use JSR imports (`jsr:`) or npm imports (`npm:`) with explicit paths. ES module style, include `.ts` extension. Group imports logically.
Structure: The entrypoint is `main.ts`. Core functionality is in `src/`. `src/app` wraps the MCP server from `src/mcp` in some convenience functions for serving HTTP, etc.
TypeScript: Strict type checking, ES modules, explicit return types
Naming: PascalCase for classes/types, camelCase for functions/variables
Files: Lowercase with hyphens, test files with .test.ts suffix
Error Handling: Use TypeScript's strict mode, explicit error checking in tests
Formatting: 2-space indentation, semicolons required, single quotes preferred
Testing: Locate tests in `test/`, use descriptive test names. We use `deno test` for testing.
Comments: JSDoc for public APIs, inline comments for complex logic

## Best Practices

Environment Variables: env vars are loading in `main.ts` using `@std/dotenv/load` in the top-level
File Paths: Use `@std/path` for cross-platform file path handling
Data Validation: Use `zod` schemas for data validation
HTTP Responses: Return proper status codes and structured JSON responses, including JSONRPC when necessary.
Transactions: Use `kv.atomic()` for Deno KV transactions when updating multiple records
Error Handling: Provide detailed error messages but avoid exposing sensitive information
Tool Implementation: Follow the MCP schema for defining tool schemas and handlers

## Docs

[MCP Spec](https://modelcontextprotocol.io/specification/2025-06-18)
[MCP Concepts](https://modelcontextprotocol.io/docs/concepts/)
[MCP Server Features](https://modelcontextprotocol.io/specification/2025-06-18/server/index)
[Hono Docs](https://hono.dev/docs/)
[Deno Docs](https://docs.deno.com/)
[Zod Docs](https://zod.dev/)
